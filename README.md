# Movie Collection Website

A personal movie tracking website that displays all movies watched, organized by year, with a manual ranking system.

## Features

- **Year-based Tabs**: View movies organized by the year they were watched
- **Movie Posters**: Displays movie posters from Tautulli metadata
- **Watch Dates**: Shows when each movie was watched
- **Ranking System**: Manually curate and rank your favorite movies with drag-and-drop functionality
- **Tautulli Integration**: Automatically pulls movie data from your local Tautulli instance

## Setup

### 1. Install Dependencies

```bash
npm install
```

### 2. Configure Environment Variables

**⚠️ IMPORTANT: Never commit your `.env` file to GitHub!**

Create a `.env` file in the root directory:

```bash
cp .env.example .env
```

Edit `.env` with your actual credentials:

```env
TAUTULLI_URL=http://your-tautulli-server:8181
TAUTULLI_API_KEY=your_actual_api_key
PLEX_URL=http://your-plex-server:32400
PLEX_TOKEN=your_plex_token
ADMIN_PASSWORD=your_secure_password
```

### 3. Fetch Initial Data

Before starting the dev server, fetch the movie/TV show data from Tautulli:

```bash
npm run fetch-data
```

This creates static JSON files in `public/data/` that the app uses. **You only need to run this once per day** (or whenever you want fresh data).

### 4. Start Development Server

```bash
npm run dev
```

This will start both the frontend (on port 3000) and backend proxy server (on port 3001).

**Note**: The backend server is still needed for serving poster images (handles CORS and authentication), but the app data comes from static JSON files, not live API calls.

### 5. Open Your Browser

Navigate to `http://localhost:3000`

## Configuration

### Tautulli API

All configuration is done via environment variables in the `.env` file:
- **TAUTULLI_URL**: Your Tautulli server URL (e.g., `http://192.168.1.100:8181`)
- **TAUTULLI_API_KEY**: Your Tautulli API key

**How to get your Tautulli API key:**
1. Open Tautulli in your browser
2. Go to Settings → Web Interface
3. Scroll down to find your API key

### Plex Server (for Movie Posters)
The app uses the same posters that Plex/Tautulli already has. Posters are accessed directly from your Plex server.

**Required - Plex Authentication Token:**
Your Plex server requires authentication to access images. You need to set a Plex token:

```bash
export PLEX_TOKEN=your_plex_token_here
```
Or create a `.env` file in the project root:
```
PLEX_TOKEN=your_plex_token_here
```

**How to get your Plex token:**

**Method 1 - From Plex Web UI (Easiest):**
1. Open Plex Web UI in your browser (http://192.168.1.100:32400/web)
2. Open browser Developer Tools (F12 or Cmd+Option+I)
3. Go to the Network tab
4. Refresh the page
5. Click on any request
6. Look for the `X-Plex-Token` header in the request headers
7. Copy that token value

**Method 2 - From Tautulli:**
1. Open Tautulli (http://192.168.1.100:8181)
2. Go to Settings → Plex Media Server
3. Look for the Plex Token field

**Method 3 - From Plex Settings XML:**
1. Navigate to: `http://192.168.1.100:32400/identity`
2. Look for the token in the XML response

Once you set the `PLEX_TOKEN` environment variable and restart the server, posters should load!

## How It Works

- **Data Loading**: The app uses static JSON files (`public/data/movies.json` and `public/data/tv-shows.json`) that are generated by running `npm run fetch-data`
- **No Live API Calls**: The app never calls the Tautulli API directly - it only reads from the pre-generated static files
- **Poster Images**: The backend proxy server handles poster image requests (for CORS and Plex authentication)
- **Movies/Shows**: Grouped by year and displayed in tabs
- **Rankings**: Stored locally in your browser's localStorage
- **Drag & Drop**: Reorder movies/shows in the Rankings tab

**Data Refresh**: Run `npm run fetch-data` daily (or whenever you want fresh data). The app will show a warning in the console if data is older than 24 hours.

## Data Management

### Updating Data

The app uses static JSON files for all data. To update the data:

```bash
npm run fetch-data
```

This will:
- Fetch fresh data from your Tautulli API
- Save it to `public/data/movies.json` and `public/data/tv-shows.json`
- Add metadata about when the data was fetched

**Recommended**: Run this daily to keep your data fresh. The app will show a console warning if data is older than 24 hours.

### Development vs Production

- **Development**: Uses the same static files as production (no live API calls)
- **Production**: Fully static - no API calls needed
- **Backend Server**: Still needed in development for poster images (CORS/authentication), but not for data

## Building for Production

### For GitHub Pages Deployment

1. **Generate static data** (requires access to your Tautulli server):
   ```bash
   npm run fetch-data
   ```
   This creates `public/data/movies.json` and `public/data/tv-shows.json`

2. **Commit the data files**:
   ```bash
   git add public/data/*.json
   git commit -m "Update static data"
   ```

3. **Build** (optional environment variables):
   ```bash
   VITE_ADMIN_PASSWORD=your_secure_password \
   npm run build
   ```

4. **The built files** will be in the `dist` directory.

**Important**: 
- GitHub Actions cannot access your local Tautulli server
- You must generate data files locally and commit them
- The production site is fully static (no API calls needed)

See `DEPLOYMENT.md` for detailed deployment instructions.

### Local Production Build

For local production testing:

```bash
npm run build
npm run preview
```

## Security

**⚠️ Before publishing to GitHub:**

1. Ensure all credentials are in `.env` (which is gitignored)
2. Never commit `.env` or any files with real credentials
3. Review `SECURITY.md` for complete security guidelines
4. Verify no hardcoded credentials exist in source files

See `SECURITY.md` for complete security documentation.

